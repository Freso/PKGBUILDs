#!/bin/sh

INTERFACE=$1
STATUS=$2

# Make sure we're always getting the standard response strings
LANG='C'

CHRONY=/usr/bin/chronyc

nm_connected() { [ "$(nmcli -t --fields STATE g)" == "connected" ]; }


case "$STATUS" in
	up)		$CHRONY -a online;;
	vpn-up)		$CHRONY -a online;;
	down)		nm_connected || $CHRONY -a offline;;
	vpn-down)	nm_connected || $CHRONY -a offline;;
esac
